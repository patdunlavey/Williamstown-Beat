--- og_user_roles.module_85	2009-07-29 07:09:24.000000000 -0400
+++ og_user_roles.module	2009-07-29 06:52:19.000000000 -0400
@@ -316,24 +316,27 @@
  *   Associative array containing details about the subscription.
  */
 function og_user_roles_og($op, $nid, $uid, $args = array()) {
-  switch ($op) {
+$node = node_load($nid);
+$appendtype = "_".$node->type;
+
+switch ($op) {
     case 'user insert':
       // Add default role for new group members, if configured.
-      if ($default_role = variable_get('og_user_roles_default_role', 0)) {
+      if ($default_role = variable_get('og_user_roles_default_role'.$appendtype, 0)) {
         og_user_roles_role_add($nid, $uid, $default_role);
       }
 
       // Add default role for new group admins, if configured.
       if (isset($args['is_admin']) && $args['is_admin']) {
-        if (($default_admin_role = variable_get('og_user_roles_default_admin_role', 0)) && $default_admin_role != $default_role) {
+        if (($default_admin_role = variable_get('og_user_roles_default_admin_role'.$appendtype, 0)) && $default_admin_role != $default_role) {
           og_user_roles_role_add($nid, $uid, $default_admin_role);
         }
       }
       break;
 
     case 'user update':
-      $default_admin_role = variable_get('og_user_roles_default_admin_role', 0);
-      $default_role = variable_get('og_user_roles_default_role', 0);
+      $default_admin_role = variable_get('og_user_roles_default_admin_role'.$appendtype, 0);
+      $default_role = variable_get('og_user_roles_default_role'.$appendtype, 0);
       if ($default_admin_role > 0 && $default_admin_role != $default_role) {
         // Grant role for new group admin.
         if (isset($args['is_admin']) && $args['is_admin']) {
